## 【balubo】プロダクト要件定義書 (MVP: クリエイター向け機能)

---

### 1. はじめに

#### 1.1. 本書の位置づけ
本書は、AI分析型ポートフォリオサイト「balubo (バルボ)」の「Minimum Viable Product (MVP) 」開発における要件を定義するものです。
MVPでは、クリエイターが自身の経験・強みの可視化と、他のクリエイターと繋がり、評価を得るためのコア機能に焦点を当てます。
事業企画案およびこれまでのユーザー要望（DBプロフィール分離、LinkedIn/YOUTRUST型の双方向承認つながり機能、タグベースレビュー機能、ホスティングのVercel指定）を反映し、
開発チームが実装に着手できるよう、機能要件、データモデル、画面構成案などを網羅的に記述します。発注者向けの専用機能や画面はMVPのスコープ外とし、将来の拡張機能として位置づけます。

#### 1.2. プロダクト名
balubo (バルボ)

#### 1.3. プロダクトコンセプト (MVP)
**クリエイターのためのキャリアSNS**
一言でいえば、クリエイター版のYOUTRUST。
クリエイターが自身の作品をAIで分析・可視化し、他のクリエイターと双方向の「つながり」を築ける。
タグベースのレビューを通じて多角的な評価と信頼を得られるプラットフォーム。
まずはライター・編集者のためのポートフォリオサービス・キャリアSNSとして、自身の価値を最大限に発揮し、お互いを高め合える場を創出します。

#### 1.4. プロジェクトの目的 (MVP)
*   クリエイターが自身のスキル、実績、強みを効果的に記録・アピールできるポートフォリオを作成できる。
*   AI分析を通じて、クリエイターが自身の強みや特徴を客観的に把握できるようにする。
*   クリエイター同士が「つながり」を形成し、互いの活動から刺激を受けられるようにする。
*   タグベースレビューにより、クリエイターが他者からの建設的なフィードバックを手軽に得られるようにする。
*   クリエイターにとって使いやすく、価値を感じられるコア体験を提供し、今後のサービス成長の基盤を築く。

#### 1.5. 対象読者
*   プロダクトマネージャー
*   UI/UXデザイナー
*   ソフトウェアエンジニア (フロントエンド、バックエンド)
*   QAエンジニア

---

### 2. ターゲットユーザー (MVP)

#### 2.1. メインターゲット: クリエイター (制作者)
*   **ペルソナ例1：フリーランスライター/編集者 (若手クリエイター)**
    *   経歴1年以上、常に新しい出会いや自身の経験を還元できる場を求めている。
    *   自身の強みやデザイン/編集の背景・狙いを言語化することに課題を感じている。
*   **ペルソナ例2：フリーランスデザイナー (中堅)**
    *   自分の価値や強みを客観的に、かつ魅力的に伝える方法を模索している。
    *   ポートフォリオ作成・更新の手間を軽減したい。
*   **その他**: カメラマン、動画編集者など、自身の作品・スキルを基にキャリアを築きたい、他のクリエイターとの繋がりや評価に関心のある全てのクリエイター。

#### 2.2. セカンダリターゲット (MVPスコープ外だが将来接続するユーザー)
*   企業・発注者 (クライアント)
    *   MVP段階では、発注者として能動的に利用する専用画面や機能は提供しませんが、将来的にはクリエイターとのマッチング機能を提供するため、システム設計上はアカウント種別として存在を許容します。

---

### 3. プロダクトの提供価値と主要機能概要 (MVP)

#### 3.1. 提供価値 (MVPクリエイター向け)
*   **自己理解の深化**: AI分析により、自身の強みや特徴を客観的に把握できる。
*   **魅力的な自己PR**: 言語化された強みや実績、タグレビューを基に、質の高いポートフォリオを容易に作成・公開できる。
*   **信頼性の向上**: AI分析に加え、他のクリエイターからのタグレビューにより、多角的な評価と信頼を獲得できる。
*   **コミュニティとの共感・発見**: 「つながり」機能を通じて、他のクリエイターの活動から学び、自身の活動を発信できる。
*   **キャリアの記録**: 作品と評価を継続的に蓄積し、キャリアの軌跡を可視化できる。

#### 3.2. 主要機能一覧 (MVPスコープ)
1.  **ユーザーアカウント機能**: 新規登録 (クリエイターとして)、ログイン、基本アカウント管理
2.  **クリエイタープロフィール機能**: プロフィール作成、編集、表示
3.  **ポートフォリオ機能 (クリエイター向け)**: 作品登録、AI分析連携、ポートフォリオページ表示
4.  **AI作品分析機能**: 登録作品の強み・特徴の抽出と言語化、結果表示
5.  **つながり機能 (クリエイター間)**: ユーザー検索、つながり申請・承認・解除 (双方向承認型)、簡易フィード
6.  **タグベースレビュー機能 (クリエイター間)**: クリエイタープロフィール/作品へのタグ評価
7.  **通知機能**: 主要なアクティビティの通知

---

### 4. 機能要件 (MVP)

#### 4.1. ユーザーアカウント関連機能

##### 4.1.1. 新規登録
*   **入力項目**:
    *   メールアドレス (必須、ユニーク)
    *   パスワード (必須、ハッシュ化して保存)
    *   表示名 (ニックネーム/氏名など、必須、後から変更可)
    *   利用規約・プライバシーポリシーへの同意 (必須)
*   **処理**:
    *   バリデーションチェック。
    *   `users` テーブルにアカウント情報を保存。
    *   アカウント種別が「クリエイター」の場合、`creator_profiles` に初期レコードを作成し、プロフィール初期設定画面へ遷移。
    *   登録完了メールを送信。
    *   登録後、自動的にログイン状態にする。

##### 4.1.2. ログイン・ログアウト
*   **ログイン入力項目**: メールアドレス、パスワード。
*   **処理**: 認証成功後、セッション/トークンを発行しログイン状態にする。ログイン後のリダイレクト先はマイページ (クリエイターダッシュボード的なページ) or フィード。
*   **(任意だが推奨) パスワードリセット機能**
*   **ログアウト処理**: セッション/トークンを無効化し、トップページへリダイレクト。

##### 4.1.3. アカウント設定 (`users` テーブル関連)
*   メールアドレス変更
*   パスワード変更
*   表示名変更
*   通知設定 (MVPでは主要通知のオン/オフ程度)
*   アカウント削除機能 (退会処理)

#### 4.2. クリエイタープロフィール機能

##### 4.2.1. プロフィール作成・編集 (`creator_profiles` テーブルに対応)
*   **必須項目**:
*   **任意項目**:
    *   プロフィール画像 (アップロード、デフォルト画像用意)
    *   自己紹介文 (リッチテキストエディタ or Markdown)
    *   職種・専門 (複数選択可、タグ形式で管理、プリセット＋自由入力)
    *   スキルセット (タグ形式で自己申告、プリセット＋自由入力)
    *   経験年数 (総合または職種ごと)
    *   居住地 (都道府県レベル)
    *   ウェブサイト/SNSリンク (複数登録可、種類とURL)
    *   希望稼働時間/単価目安 (公開範囲設定可能: 全体公開 / つながっている人のみ / 非公開)
    *   ポートフォリオ全体の公開設定 (全体公開 / つながっている人のみ / 非公開)

##### 4.2.2. プロフィール表示
*   他のユーザー (主にクリエイター) が閲覧可能なクリエイターの公開プロフィールページ。
*   上記設定項目に加え、AIによる強みサマリー (4.4参照)、受けたレビューサマリー (4.6参照)、登録作品一覧 (4.3参照) を表示。

#### 4.3. ポートフォリオ機能 (クリエイター向け)

##### 4.3.1. 作品登録 (`works` テーブルに対応)
*   作品ごとに、作品種別 (例: 記事, ウェブサイト, デザイン, 写真, 動画, その他。選択式)で作品登録画面を分けたい。
*   まずは記事だけでOK、ライター向きに

*   **入力項目**:
    *   作品URL入力欄　※URLを入れるとタイトルや説明文を自動生成
    *   作品タイトル (必須)    
    *   作品概要/説明文 
    *   AI分析ボタン：AIにより作品の特徴や魅力を分析＋またタグを自動生成する（ちなみにこのタグがストックされていくごとで、クリエイターの強みや魅力を可視化する分析に役立てる）

*   **任意項目**:
    *   作品ファイルアップロード (画像, PDFなど。ファイル形式・サイズ制限あり) または 作品URL (外部サイトへのリンク)
    *   制作時期 (年月)
    *   担当範囲/役割 (自由記述またはタグ選択)
    *   関連タグ (自由入力 or プリセット選択)
    *   個別の作品公開範囲 (全体公開 / つながっている人のみ / 非公開)
*   **処理**:
    *   作品情報をデータベースに保存。ファイルはストレージに保存。
    *   作品登録/更新後、AI分析をトリガー (4.4参照)。

##### 4.3.2. 作品編集・削除
*   登録済みの作品情報を編集・削除できる。
*   削除時は確認ダイアログを表示。

##### 4.3.3. ポートフォリオページ/作品一覧表示
*   クリエイターのプロフィールページ内で、登録された作品一覧を表示。
*   作品はカード形式やリスト形式で表示 (ソート機能: 新着順)。
*   各作品をクリックすると作品詳細ページへ遷移。

##### 4.3.4. 作品詳細ページ
*   作品の全情報 (タイトル、画像/動画、説明、メタデータ等) を表示。
*   その作品に対するAI分析結果 (4.4参照) を表示。
*   その作品に対して受けたタグレビュー (4.6参照) を表示。

#### 4.4. AI作品分析機能

##### 4.4.1. 分析トリガーと対象
*   **トリガー**: クリエイターが新しい作品を登録・更新した際 (非同期処理)。
*   **対象**: 主にテキストベースの作品 (記事本文、作品概要など)。画像の場合はメタ情報や説明文から類推。
*   **技術スタック**: Google Gemini API を主に利用。

##### 4.4.2. 分析結果の項目 (例 - MVPではシンプルに)
*   **テキスト分析**:
    *   主要キーワード抽出
    *   推定される作風・文体特徴 (例: 論理的、感情豊か、簡潔)
    *   推定される得意分野/トピック
*   **総合的な強み・特徴**: 上記を基に、クリエイターの強みや特徴を数点の箇条書きで言語化。

##### 4.4.3. 分析結果の保存と表示
*   分析結果は作品ごと、およびクリエイタープロファイルに関連付けてデータベースに保存 (`ai_analysis_results`)。
*   **表示箇所**:
    *   クリエイターのプロフィールページ: AIによる「あなたの強み」としてサマリーを表示。
    *   作品詳細ページ: 個別作品のAI分析結果を表示。

#### 4.5. つながり機能 (クリエイター間、双方向承認モデル)

##### 4.5.1. クリエイター検索
*   表示名、ユーザーID、職種、スキルなどで他のクリエイターを検索できる。

##### 4.5.2. つながり申請・承認・解除 (`connections` テーブルに対応)
*   **つながり申請**: 他クリエイターのプロフィールページで「つながりを申請」ボタンをクリック。
*   **申請の承認/拒否**: 通知や専用ページで申請を確認し、承認または拒否。
    *   承認されると相互につながり状態となる。
*   **つながりの解除**: 既につながっているクリエイターとのつながりを解除できる。
*   詳細は前バージョン(1.1)の 4.4.2. と同様のロジック。

##### 4.5.3. つながり一覧表示
*   自分が「つながっている」クリエイターの一覧を表示。

##### 4.5.4. 簡易フィード機能
*   自分が「つながっている」クリエイターの新しい作品投稿など、主要なアクティビティを時系列で表示するシンプルなフィード。MVPでは「いいね」や「コメント」は対象外。

#### 4.6. タグベースレビュー機能 (クリエイター間)

##### 4.6.1. レビュー対象
*   クリエイターのプロフィール全体。
*   クリエイターが登録した個別の作品。

##### 4.6.2. レビュアー
*   baluboに登録している他のクリエイター。

##### 4.6.3. レビュー方法
*   **タグ選択**:
    *   運営側が事前に定義した3～5つの「評価タグ」セットから複数選択。
    *   例: 「#アイデアが斬新」「#表現が丁寧」「#技術力が高い」「#コミュニケーション円滑」「#刺激を受ける」
*   **(任意) 一言コメント**: 数十文字程度の自由記述コメントを追加できる。

##### 4.6.4. タグの管理 (`review_tags` テーブル)
*   レビュータグは運営側が一元管理。初期は汎用的なタグセットを数種類用意。

##### 4.6.5. レビューの表示
*   クリエイターのプロフィールページ: 受けたレビュータグの集計結果 (タグクラウドや件数表示)、個別レビュー一覧 (タグ + 任意コメント + レビュアー情報)。
*   作品詳細ページ: その作品に対して受けたレビューを表示。
*   レビューされたクリエイターは、不適切なレビューを運営に報告できる機能 (MVPでは簡易的な報告フォームでも可)。表示/非表示選択はMVP外。

#### 4.7. 通知機能 (`notifications` テーブル)
*   **通知トリガー (MVP)**:
    *   新しい「つながり申請」が届いた時
    *   自分の「つながり申請」が承認された時
    *   自分のプロフィール/作品にレビューがついた時
*   **通知方法**: サイト内通知 (ヘッダーなどに未読件数表示、通知一覧ページ)。メール通知はMVP外または最小限。

---

### 5. データモデル (Supabase - PostgreSQL) (MVPスコープ)

*   **`users`**: ユーザー基本アカウント情報
    *   `id` (UUID, PK)
    *   `email` (TEXT, UNIQUE, NOT NULL)
    *   `hashed_password` (TEXT, NOT NULL)
    *   `display_name` (TEXT, NOT NULL)
    *   `user_identifier` (TEXT, UNIQUE, NOT NULL)
    *   `account_type` (ENUM('creator', 'client'), NOT NULL) - MVPでは主に'creator'
    *   `created_at`, `updated_at`
*   **`creator_profiles`**: クリエイター専用プロフィール
    *   `user_id` (UUID, FK to users.id, PK)
    *   `avatar_url` (TEXT)
    *   `bio` (TEXT)
    *   `professions` (TEXT[])
    *   `skills` (TEXT[])
    *   `experience_years` (INTEGER)
    *   `location` (TEXT)
    *   `website_urls` (JSONB or TEXT[])
    *   `availability` (TEXT)
    *   `rate_目安` (TEXT)
    *   `portfolio_visibility` (ENUM('public', 'connections_only', 'private'), DEFAULT 'public')
    *   `created_at`, `updated_at`
*   **`(将来用) client_profiles`**: 発注者専用プロフィール (MVPスコープ外のためカラム定義は省略)
*   **`works`**: クリエイターの作品
    *   `id` (UUID, PK)
    *   `user_id` (UUID, FK to users.id, NOT NULL) - 作成者(クリエイター)
    *   `title` (TEXT, NOT NULL)
    *   `description` (TEXT)
    *   `work_type` (TEXT)
    *   `file_urls` (JSONB or TEXT[])
    *   `external_url` (TEXT)
    *   `production_date` (DATE)
    *   `roles_responsibilities` (TEXT)
    *   `tools_technologies` (TEXT[])
    *   `tags` (TEXT[])
    *   `visibility` (ENUM('public', 'connections_only', 'private'), DEFAULT 'public')
    *   `created_at`, `updated_at`
*   **`ai_analysis_results`**: AI分析結果
    *   `id` (UUID, PK)
    *   `work_id` (UUID, FK to works.id, NULLABLE)
    *   `user_id` (UUID, FK to users.id, NULLABLE) - プロフィール全体のサマリー用
    *   `analysis_type` (TEXT)
    *   `result_data` (JSONB) - 分析結果 (キーワードリスト、強み記述など)
    *   `created_at`
*   **`connections`**: つながり (双方向承認型)
    *   `id` (UUID, PK, DEFAULT uuid_generate_v4())
    *   `requester_id` (UUID, FK to users.id, NOT NULL) - 申請者
    *   `requestee_id` (UUID, FK to users.id, NOT NULL) - 被申請者
    *   `status` (ENUM('pending', 'approved', 'declined', 'blocked'), NOT NULL, DEFAULT 'pending')
    *   `requested_at` (TIMESTAMP WITH TIME ZONE, DEFAULT now(), NOT NULL)
    *   `updated_at` (TIMESTAMP WITH TIME ZONE, DEFAULT now(), NOT NULL)
    *   CONSTRAINT `connections_unique_pair` UNIQUE (`requester_id`, `requestee_id`)
*   **`review_tags`**: 運営が管理するレビュー用タグ
    *   `id` (SERIAL, PK)
    *   `tag_name` (TEXT, UNIQUE, NOT NULL)
    *   `description` (TEXT, NULLABLE)
    *   `is_active` (BOOLEAN, DEFAULT true)
*   **`reviews`**: 投稿されたレビュー
    *   `id` (UUID, PK)
    *   `reviewer_id` (UUID, FK to users.id, NOT NULL) - レビューしたクリエイター
    *   `reviewee_user_id` (UUID, FK to users.id, NULLABLE) - レビューされたクリエイター (プロフィールレビューの場合)
    *   `reviewed_work_id` (UUID, FK to works.id, NULLABLE) - レビューされた作品 (作品レビューの場合)
    *   `comment` (TEXT, NULLABLE) - 任意の一言コメント
    *   `created_at`, `updated_at`
    *   CONSTRAINT `review_target_check` CHECK (`reviewee_user_id` IS NOT NULL OR `reviewed_work_id` IS NOT NULL)
*   **`review_applied_tags`**: レビューに適用されたタグ (中間テーブル)
    *   `review_id` (UUID, FK to reviews.id, PK)
    *   `tag_id` (INTEGER, FK to review_tags.id, PK)
*   **`notifications`**: 通知
    *   `id` (UUID, PK)
    *   `user_id` (UUID, FK to users.id, NOT NULL) - 通知を受け取る人
    *   `type` (TEXT, NOT NULL) - 通知種別 (例: 'connection_request', 'connection_approved', 'new_review')
    *   `message` (TEXT, NOT NULL)
    *   `related_entity_id` (UUID, NULLABLE) - 関連エンティティID (例: 申請者のuser_id, レビューID)
    *   `related_entity_type` (TEXT, NULLABLE) - 関連エンティティ種別 (例: 'user', 'review')
    *   `is_read` (BOOLEAN, DEFAULT false)
    *   `created_at`

---

### 6. 画面設計案 (MVPクリエイター向け主要画面)

ワイヤーフレームやUIデザインは別途作成する。

#### 6.1. トップページ (非ログイン時)
*   ヘッダー: ロゴ, (将来の)サービス概要, ログインボタン, 新規登録ボタン
*   ヒーローセクション: キャッチコピー, クリエイターにとっての価値訴求, 新規登録へのCTA
*   フッター: 利用規約, プライバシーポリシー

#### 6.2. 新規登録ページ / ログインページ
*   各入力フォーム (4.1.1, 4.1.2参照)

#### 6.3. クリエイター用マイページ (ポートフォリオ)
*   ヘッダー (ログイン時): ロゴ,ホーム, ポートフォリオ,作品追加ボタン,設定
*   自分のプロフィール
*   ポートフォリオ

#### 6.5. 作品詳細ページ
*   作品の全情報表示 (4.3.4参照)
*   AIによる個別作品分析結果表示
*   この作品へのレビュー一覧表示
*   (他人の作品の場合) レビュー投稿ボタン (つながっているクリエイターなど条件あり)
*   (自分の作品の場合) 作品編集/削除ボタン

#### 6.6. 作品登録/編集ページ
*   4.3.1で定義した各項目の入力フォーム

#### 6.7. クリエイタープロフィール編集ページ
*   4.2.1で定義した各項目の編集フォーム

#### 6.8. クリエイター検索ページ
*   検索条件入力 (表示名、職種、スキルなど)
*   検索結果クリエイター一覧 (カード形式、プロフィールページへのリンク)

#### 6.9. つながり管理ページ
*   自分に来た「つながり申請」一覧 (承認/拒否ボタン)
*   自分が送った「つながり申請」一覧 (取り消しボタン)
*   現在の「つながり」一覧 (解除ボタン)

#### 6.10. レビュー投稿モーダル/ページ
*   レビュー対象情報表示
*   タグ選択UI
*   一言コメント入力欄 (任意)
*   投稿ボタン

#### 6.11. 通知一覧ページ
*   未読/既読の通知をリスト表示

---

### 7. 非機能要件
(変更なし、前バージョン(1.1)と同様の内容を想定)
*   パフォーマンス
*   セキュリティ
*   スケーラビリティ (MVPでは過度な最適化は不要だが考慮)
*   ユーザビリティ・アクセシビリティ (WCAG準拠は努力目標)
*   メンテナンス性

---

### 8. 技術スタック

#### 8.1. フロントエンド
*   **フレームワーク**: Next.js (App Router)
*   **言語**: TypeScript
*   **UIライブラリ**: React
*   **スタイリング**: Tailwind CSS
*   **UIコンポーネント**: shadcn/ui
*   **状態管理**: React Context / Zustand / Jotai (必要に応じて検討)
*   **データフェッチ**: React Query (TanStack Query) or SWR

#### 8.2. バックエンド
*   **プラットフォーム**: Supabase
    *   **データベース**: PostgreSQL
    *   **ストレージ**: Supabase Storage
    *   **サーバーレス関数**: Supabase Edge Functions (AI分析処理のバックエンド連携、メール送信など)

#### 8.3. AI分析
*   **API**: Google Gemini API

#### 8.4. メール送信
*   Resend / SendGrid (Supabase Edge Functionsから連携) - MVPでは登録完了メール程度

#### 8.5. ホスティング
*   **Vercel**

#### 8.6. バージョン管理
*   Git / GitHub

#### 8.7. その他ツール
*   **CI/CD**: GitHub Actions
*   **コミュニケーション**: Slack, etc.
*   **ドキュメンテーション**: Notion, Confluence, etc.

---

### 9. 今後の展開 (MVP以降)

*   **Phase 2: 発注者機能の導入とクリエイター機能拡充**
    *   発注者アカウント機能、プロフィール作成
    *   発注者によるクリエイター検索機能の詳細化
    *   プロジェクト掲載機能 (発注者)
    *   プロジェクト応募機能 (クリエイター)
    *   フィード機能の強化 (いいね、コメント)
    *   AI分析の高度化
*   **Phase 3: マッチング精度の向上と収益化モデル導入**
    *   AIによるマッチングレコメンド
    *   発注者向け有料プラン (高度な検索、マッチングサポートなど)
    *   クリエイター向けオプション機能 (詳細レポートなど)
*   **Phase 4: プラットフォームエコシステムの発展**
    *   AIエージェント機能
    *   コミュニティ機能強化 (グループ、イベント等)
    *   外部サービス連携


