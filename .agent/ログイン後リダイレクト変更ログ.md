# ログイン後のリダイレクト先変更ログ

## 概要
ログイン成功後に `/profile?tab=profile` に自動的にリダイレクトするように変更しました。

---

## 実装日時
2025-11-20

## 変更内容

### 1. **ログインページ** (`/src/app/login/page.tsx`)
**変更箇所:** 121行目

**変更前:**
```tsx
router.push("/profile");
```

**変更後:**
```tsx
router.push("/profile?tab=profile");
```

**理由:** ログイン後、ユーザーが自分のプロフィール情報を直接確認できるように、profileタブを開いた状態で遷移する。

---

### 2. **Google認証コールバック** (`/src/app/auth/callback/page.tsx`)
**変更箇所:** 81行目、83行目

**変更前:**
```tsx
if (typeof window !== "undefined") {
  window.location.href = "/profile";
} else {
  router.push("/profile");
}
```

**変更後:**
```tsx
if (typeof window !== "undefined") {
  window.location.href = "/profile?tab=profile";
} else {
  router.push("/profile?tab=profile");
}
```

**理由:** Google認証でログインした場合も、同様にprofileタブを開いた状態で遷移する。

---

### 3. **トップページ** (`/src/app/page.tsx`)
**変更箇所:** 65行目

**変更前:**
```tsx
router.push("/profile");
```

**変更後:**
```tsx
router.push("/profile?tab=profile");
```

**理由:** ログイン済みユーザーがトップページにアクセスした場合も、profileタブを開いた状態でリダイレクトする。

---

## プロフィールページの対応状況

プロフィールページ (`/src/app/profile/page.tsx`) は既に `tab` クエリパラメータに対応しています：

```tsx
// 120-125行目
useEffect(() => {
  const tabParam = searchParams.get("tab");
  if (tabParam && ["profile", "works", "details"].includes(tabParam)) {
    setActiveTab(tabParam as "profile" | "works" | "details");
  }
}, [searchParams]);
```

### タブの種類
- `profile`: プロフィール概要（経験やスキルの整理）
- `works`: 作品ダッシュボード（作品の成果を可視化）
- `details`: クリエイター分析（専門性とパフォーマンスを分析）

---

## ユーザー体験の改善

### Before（変更前）
1. ログイン
2. プロフィールページに遷移
3. デフォルトで「works」タブが表示される
4. ユーザーが手動で「profile」タブをクリック

### After（変更後）
1. ログイン
2. プロフィールページの「profile」タブに直接遷移 ✨
3. すぐに自分のプロフィール情報を確認・編集できる

---

## 期待される効果

1. **初回ログイン時の体験向上**
   - 新規ユーザーがプロフィール情報を入力しやすくなる
   - 「次に何をすべきか」が明確になる

2. **操作ステップの削減**
   - タブ切り替えの手間が1ステップ削減
   - より直感的なUX

3. **コンバージョン率の向上**
   - プロフィール完成率の向上が期待できる
   - ユーザーのエンゲージメント向上

---

## テスト方法

### 1. 通常ログイン
```bash
# 開発サーバーを起動
npm run dev

# ブラウザで以下にアクセス
http://localhost:3000/login

# ログイン後、URLが以下になることを確認
http://localhost:3000/profile?tab=profile
```

### 2. Google認証
```bash
# Googleアカウントでログイン
# 認証成功後、URLが以下になることを確認
http://localhost:3000/profile?tab=profile
```

### 3. トップページからのリダイレクト
```bash
# ログイン済みの状態でトップページにアクセス
http://localhost:3000/

# 自動的に以下にリダイレクトされることを確認
http://localhost:3000/profile?tab=profile
```

---

## 関連ファイル

- `/src/app/login/page.tsx` - ログインページ
- `/src/app/auth/callback/page.tsx` - Google認証コールバック
- `/src/app/page.tsx` - トップページ
- `/src/app/profile/page.tsx` - プロフィールページ（既存の実装を活用）

---

## 今後の拡張案

1. **リダイレクト先のカスタマイズ**
   - ユーザーの状態に応じてリダイレクト先を変更
   - 例：プロフィール未完成 → `profile` タブ、完成済み → `works` タブ

2. **オンボーディングフロー**
   - 初回ログイン時に簡単なチュートリアルを表示
   - プロフィール入力を促すガイド

3. **アナリティクス**
   - タブごとの滞在時間を計測
   - ユーザーの行動パターンを分析

---

## まとめ

✅ ログイン後に `/profile?tab=profile` に自動リダイレクト  
✅ Google認証でも同様に対応  
✅ トップページからのリダイレクトも対応  
✅ プロフィールページは既存の実装で対応済み  

**実装完了！** 🎉
